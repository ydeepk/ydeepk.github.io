<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Weather App </title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
<link href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/css/weather-icons.min.css" rel="stylesheet">
    <style>
    /* import google fonts */

@import url(https://fonts.googleapis.com/css?family=Raleway);
@import url(https://fonts.googleapis.com/css?family=Lato:300);
.raleway {
  font-family: 'Raleway', sans-serif;
}

.lato {
  font-family: 'Lato', sans-serif;
}

h1 {
  font-size: 6.8rem;
}

h2 {
  font-size: 4.5rem;
}

.text-white {
  color: #fff;
}

.text-red {
  color: red;
}

.weather-card {
  box-shadow: 4px 8px 16px #37474f;
}

.small-wi {
  font-size: 5.2rem !important;
}

.card-icon,
.title {
  color: #1e88e5;
}
.title {
  text-shadow:3px 4px 6px #90a4ae;
}

.card-info {
  background-color: #1e88e5;
  color: #fff;
}

.wi {
  font-size: 12rem;
}

.unit {
  cursor: pointer;
}

.credit-content {
  margin-top: 15rem;
  margin-left: 30%;
  height: auto;
  width: 40%;
  background-color: #1e88e5;
}

.credit-content ul {
  padding: 20px;
  list-style-type: none;
}

.credit-content li {
  padding: 10px;
  color: #e3f2fd;
}

.credit-content li a {
  color: #fff;
}</style>


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body><div class="container-fluid">
  <div class="row">
    <div class="col-xs-12">
      <h2 class="text-white">i</h2></div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <h2 class="text-center raleway">Live <strong><span class="title"><i class="wi wi-thunderstorm small-wi"></i> Weather</span></strong> App</h2></div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <h2 class="text-white">i</h2></div>
  </div>
</div>

<div class="container-fluid">
  <div class="row">
    <div class="col-xs-1 col-md-3 col-l-4"></div>

    <div class="col-xs-10 col-md-6 col-l-4 weather-card">
      <div class="row">

        <div class="col-xs-12 col-md-12 col-l-12 card-icon">
          <div class="row">
            <div class="col-xs-12">
              <h1 class="text-center icon"><i class="wi"></i></h1></div>
            <div class="col-xs-12">
              <h3 class="text-center"><stronger><span class="main raleway"></span></stronger></h3></div>
          </div>
        </div>

        <div class="col-xs-12 col-md-12 col-l-12 card-info">
          <div class="row">
            <div class="col-xs-12">
              <h1 class="text-center"><stronger><span class="temp lato"></span> <span><sup>&deg;</sup></span><span class="unit"></span></stronger></h1></div>
            <div class="col-xs-12">
              <h3 class="text-center"><stronger><span class="loc raleway"></span></stronger></h3></div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xs-1 col-md-3 col-l-4"></div>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <h4 class="text-white">i</h4></div>
    <div class="col-xs-12">
      <h5 class="text-center"><i class="fa fa-code fa-2x"></i> with <i class="fa fa-favourite fa-2x text-red"></i> by <strong class="raleway"> <a href="http://ydeepk.github.io" target="_blank">Deepak</a></strong></h5>
    </div>
    <div class="col-xs-12 text-center">
      <a href="#" data-toggle="modal" data-target="#credits">credits</a>
    </div>
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="credits">
  <div class="credit-content text-center blue-grey-bg">
    <ul>
      <li>Built on -> <a href="http://getbootstrap.com/">Twitter Bootstrap framework</a></li>
      <li>API used -> <a href="http://openweathermap.org/">Open Weather</a></li>
      <li>Icons used -> <a href="http://fontawesome.io/">Font Awesome</a></li>
      <li>Icons -> <a href="http://erikflowers.github.io/">Weather Icons</a></li>
      <li>Fonts by -> <a href="https://www.google.com/fonts
">Google Fonts</a></li>
    </ul>
  </div>
</div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script>// variables at play
var city = "";

// need some functionality
function getLocation() {
  var url = 'http://ipinfo.io/json'; // using ipinfo json
  $.ajax({
    url: url,
    dataType: "json",
    success: function(data) {
      city = data.city + "," + data.country;
    }
  });
}

function getWeather(city) {
  var url = "http://api.openweathermap.org/data/2.5/weather?q=" + city + "&type=accurate&appid=6c949592178296a1690e5499156f7422";
  $.ajax({
    url: url,
    dataType: "json",
    success: function(json) {
      var celsius = Math.round(json.main.temp - 273);
      var fahrenheit = Math.round(1.8 * (json.main.temp - 273) + 32);
      var weatherMain = json.weather[0].main;
      var c = "C";
      var f = "F";
      var location = json.name + ", " + json.sys.country;
      $('.temp').html(fahrenheit);
      $('.unit').html(f);
      // changes celsius to fahren
      $('.unit').on('click', function() {
        if ($('.unit').html() == f) {
          $('.temp').html(celsius);
          $('.unit').html(c);
        } else if ($('.unit').html() == c) {
          $('.temp').html(fahrenheit);
          $('.unit').html(f);
        }
      });
      //switch icons based on conditions
      switch (weatherMain) {
        case 'Clear':
          $('.wi').addClass('wi-day-sunny');
          break;
        case 'Haze':
          $('.wi').addClass('wi-day-haze');
          break;
        case 'Clouds':
          $('.wi').addClass('wi-cloudy');
          break;
        case 'Cloudy':
          $('.wi').addClass('wi-cloudy');
          break;
        case 'Dust':
          $('.wi').addClass('wi-dust');
          break;
        case 'Rain':
          $('.wi').addClass('wi-rain');
          break;
        case 'Thunderstorm':
          $('.wi').addClass('wi-thunderstorm');
          break;
        case 'Dusty':
          $('.wi').addClass('wi-dust');
          break;
        case 'Dusty':
          $('.wi').addClass('wi-dusty');
          break;
        case 'Snow':
          $('.wi').addClass('wi-snow');
          break;
        case 'Shower':
          $('.wi').addClass('wi-showers');
          break;
        default:
          $('.wi').addClass('wi-na');
      }
      $('.main').html(weatherMain);
      $('.loc').html(location);
    }
  });
}

function note() {
  message = "Note: To view Temperature in Celsius / Fahrenhiet click on C / F inside the Widget.";
  alert(message);
}
// do this, when ready
$(document).ready(function() {
  getLocation(); // call location first
  getWeather(); // get weather for me
  note(); // notify user
});
</script>

  </body>
</html>
