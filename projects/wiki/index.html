<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Wikipedia App | Search &amp; Random</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href="../../css/animate.css" rel="stylesheet">
    <style>
      /* load fonts file raleway, lato (Josefins Sans Montesrat ) */
      @import url(https://fonts.googleapis.com/css?family=Raleway:400,300);
      @import url(https://fonts.googleapis.com/css?family=Lato:300);
      .raleway {
          font-family: 'Raleway', sans-serif;
          font-weight: 300;
      }
      .lato {
        font-family: 'Lato', sans-serif;
      }
      .text-white {
        color: #fff;
      }
      .text-blue-grey {
          color:#263238;
      }
      .text-blue {
          color: rgba(30,136,229,1);
      }
      .text-light-blue {
          color: #64b5f6;
      }
      .text-red {
          color:#d32f2f;
      }
      .white-bg {
          background-color: #fff;
      }
      .blue-grey-bg {
          background-color: #263238;
      }
      .light-grey-bg {
          background-color: #eceff1;
      }
      h1 {
          font-size: 9rem;
      }
      .h4-size {
          font-size: 2rem;
      }

      /* Input & Placeholder*/
      input {
          height: 60px !important;
          width: 80% !important;
          border: 1px solid #b0bec5 !important;
          border-top-color: #fff !important;
          border-left-color: #fff !important;
          border-right-color: #fff !important;
          border-radius: 0 !important;
          box-shadow: inset 0px 0px 0px #fff !important;
      }
      input[type="text"]:focus {
          border: 4px solid rgba(30,136,229,1) !important;
          color: #64b5f6 !important;
          font-size: 2rem;
          font-family: 'Lato', sans-serif;
      }
      ::-webkit-input-placeholder { /* Chrome/Opera/Safari */
          color: #90caf9 !important;
          font-size: 2rem;
          text-align: center;
          font-family: 'Lato', sans-serif;
      }
      ::-moz-placeholder { /* Firefox 19+ */
        color: #90caf9 !important;
          font-size: 2rem;
          text-align: center;
          font-family: 'Lato', sans-serif;
      }
      :-ms-input-placeholder { /* IE 10+ */
        color: #90caf9 !important;
          font-size: 2rem;
          text-align: center;
          font-family: 'Lato', sans-serif;
      }
      :-moz-placeholder { /* Firefox 18- */
        color: #90caf9 !important;
          font-size: 2rem;
          text-align: center;
          font-family: 'Lato', sans-serif;
      }
      .search-btn,
      .random-btn,
      .read-btn {
          margin-left: 5px;
          font-size: 2rem;
          text-decoration: none !important;
          padding: 0px 40px;
          padding-top: 16px;
          padding-bottom: 21px;
          color:#fff;
          background-color:rgba(30,136,229,1);
          border: 1px solid rgba(30,136,229,1);
      }
      .read-btn {
          margin-bottom: 5px !important;
          padding: 10px 20px !important;
          color: #fff;
          background-color:dodgerblue;
          border-radius: 0;
      }
      .search-btn:hover,
      .random-btn:hover,
      .read-btn:hover {
          color:#fff;
          background-color:rgba(30,136,229,0.7);
      }
      input[type="text"]:focus+.search-btn {
          position: absolute;
          margin-top: 0px !important;
          padding-top: 13px !important;
          padding-bottom: 18px !important;
      }
      .inline input, .inline .search-alert {
          display: inline-block;
      }
      .alert {
          padding: 10px 30px;
          box-shadow: 4px 4px 6px #cfd8dc;
      }
      .alert-close {
          position:absolute;
          margin-top: -30px;
          margin-left: 80%;
          cursor: pointer;
      }
      .preloader {
          overflow: hidden;
      }
      /* RESULT */
      .result {
          height: auto;
          margin-top: -1px;
          border: 1px solid #cfd8dc;
      }
      .result-container-close {
          cursor: pointer;
          padding: 20px 10px;
          font-size: 2rem;
      }
    </style>


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

      <header class="blue-grey-bg">
        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-12"><h6 class="text-blue-grey">i</h6></div>
                <div class="col-xs-12">
                    <h1 class="text-center text-white raleway">Wiki<span class="text-blue">pedia</span> App</h1>
                </div>
                <div class="col-xs-12">
                    <h4 class="text-center text-white lato"><i class="fa fa-quote-left fa-2x"></i> Mind's <strong>Hungry ?</strong> Go ahead and <strong>Feed</strong> it.</h4>
                </div>
                <div class="col-xs-12"><h6 class="text-blue-grey">i</h6></div>
            </div>
          </div>
      </header>

      <main>
          <section>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-12"><h6 class="text-white">i</h6></div>
                    <div class="col-xs-12"><h6 class="text-white">i</h6></div>

                    <div class="col-xs-2"></div>
                    <div class="col-xs-8">
                        <div class="row">
                        <div class="col-xs-12 inline">
                            <input class="form-control" type="text" placeholder="What are you looking for?"><a class="search-btn" href="#">Search</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-2"></div>

                    <div class="col-xs-12"><h6 class="text-white">i</h6></div>
                    <div class="col-xs-12"><h6 class="text-white">i</h6></div>

                    <div class="col-xs-12 text-center"><h4 class="lato text-blue-grey"><span class="h4-size">Not sure what to look for <strong>?</strong></span> <a class="random-btn lato" href="#"><strong>Hit Random</strong> ! Article</a></h4></div>

                </div>
          </div>
          </section>
          <!-- RESULT section -->
          <section>
            <div class="container-fluid">
                <div class="row">

                    <div class="col-xs-12"><h6 class="text-white">i</h6></div>
                    <div class="col-xs-12"><h6 class="text-white">i</h6></div>

                    <!--  ALERT Message-->
                    <div class="col-xs-2"></div>
                    <div class="col-xs-8">
                            <div class="col-xs-12 inline">
                                <div class="alert hidden">
                                    <h4 class="raleway text-blue-grey">You Searched for : <strong><span class="search-value text-light-blue lato"></span></strong></h4><i class="fa fa-close alert-close fa-2x text-red"></i></div>
                            </div>
                    </div>
                    <div class="col-xs-2"></div>
                    <!-- /Search ALERT Message-->

                    <div class="col-xs-12"><h6 class="text-white">i</h6></div>

                    <!-- Preloader -->
                    <div class="col-xs-2"></div>
                    <div class="col-xs-8 preloader hidden">
                         <h3 class="text-center raleway text-blue">Please Wait, Fetching Result ...</h3>
                    </div>
                    <div class="col-xs-2"></div>
                    <!-- /Preloader -->

                    <div class="col-xs-12"><h6 class="text-white">i</h6></div>

                    <!-- RESULT Container -->
                    <div class="col-xs-2"></div>
                    <div class="col-xs-8 result-container blue-grey-bg hidden"></div>
                    <div class="col-xs-2"><span class="result-container-close">Clear Result<i class="fa fa-close fa-2x text-red"></i></span></div>
                    <!-- /RESULT Container -->

                </div>
            </div>
          </section><!-- / RESULT section -->

      </main>

      <footer>
        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-12"><h6 class="text-white">i</h6></div>
                <div class="col-xs-12"><h2 class="text-white">i</h2></div>
                <div class="col-xs-12"><h2 class="text-white">i</h2></div>
                <div class="col-xs-12 blue-grey-bg">
                    <h4 class="text-center text-white raleway"><i class="fa fa-code fa-2x"></i> with <i class="fa fa-heart fa-2x text-red"></i> by <a href="https://ydeepk.github.io" target="_blank"><strong>Deepak</strong></a></h4>
                </div>
            </div>
          </div>
      </footer>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script type="text/javascript">// Variables at Play
    // none
    var $alert = $('.alert'),
        $alertClose = $('.alert-close'),
        $resultContainerClose = $('.result-container-close'),
        $resultContainer = $('.result-container'),
        $preloader = $('.preloader'),
        $searchValue = $('.search-value'),
        $randomBtn = $('.random-btn'),
        $searchBtn = $('.search-btn'),
        $text = $('input[type="text"]');

    $resultContainerClose.hide(); // hide clear button

    // Give me some Action
    $alertClose.click(function() {    // remove Alert
        $alert.remove();
    });

    $resultContainerClose.click(function() {    // remove Result
        $resultContainer.remove();
        // Refersh Web Page
        refreshPage();
    });


    // Need some Functionality
    function searchWiki() {  // search function
        var find = $('input[type="text"]').val(); // Hold Search Input

        alertMsg(find);

        var url = 'https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch='+find+'&format=json&callback=?'; // WIKI API URL

        $.ajax({  // load Data
            url: url,
            dataType: 'json',
            success: function(json) {

                $preloader.remove(); // Remove Preloader

                $resultContainerClose.show(); // Show Clear Result

                $resultContainer.removeClass('hidden'); // display Result Container

                var data = json.query;

                for(var i = 0; i < data.search.length; i++) {
                    $resultContainer.append('<div class="col-xs-12 result white-bg text-right light-grey-bg"><h3 class="title-wiki text-left text-blue raleway">'+data.search[i].title+'</h3><h4 class="snippet-wiki text-left text-blue-grey lato">'+data.search[i].snippet+'</h4><a href="https://en.wikipedia.org/wiki/'+data.search[i].title+'" class="read-btn btn btn-large" target="_blank">Read This</a></div>');

                }
            }
        });
    }

    function randomWiki() { // Random function
        window.location.href = "https://en.wikipedia.org/wiki/Special:Random"; // redirect
    }

    function refreshPage() {
        window.location.href="index.html"; // Self Redirect
    }

    function alertMsg(find) {
        $alert.removeClass('hidden'); // Display Search Alert
        $searchValue.append(find); // Push Search value in ALert
        $alert.addClass('animated rubberBand');
    }

    var main = function() { // Main function
        $randomBtn.click(randomWiki); //load Random Wikipedia

        $text.keypress(function(e) { // Submit Search Input value
            if(e.which==13) {
                $text.submit();

                $preloader.removeClass('hidden');
                $('.preloader h3').addClass('animated lightSpeedIn cust-ani infinite');

                searchWiki(); // Call Search wiki
            }
        });

        $searchBtn.click(function() { // Submit input on Click
            $text.submit();

            $preloader.removeClass('hidden');
            $('.preloader h3').addClass('animated lightSpeedIn cust-ani infinite');

            searchWiki();
        });
    }


    // Do it, when Ready
    $(document).ready(main);


    // WIKI API REFERENCE

    // https://en.wikipedia.org/wiki/Special:Random
    // https://www.mediawiki.org/wiki/API:Main_page
    // http://en.wikipedia.org/w/api.php?action=query&generator=random&grnnamespace=0&prop=extracts&exchars=500&format=json
</script>

  </body>
</html>
